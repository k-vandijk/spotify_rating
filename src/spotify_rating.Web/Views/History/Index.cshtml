@model HistoryViewModel
@{
    ViewData["Title"] = "spotify_rating";
}
<div class="card shadow-lg container p-0 my-5 col-xl-6 col-lg-8 col-md-10 col-sm-12 col-12">
    <div class="py-3 px-3 px-sm-3 px-md-3 px-lg-5 px-xl-5">
        <h3 class="text-center mb-3">@Model.Rated / @Model.Total</h3>

        <div class="list-group">
            @foreach (var userTrack in Model.Tracks.OrderByDescending(r => r.RatedAtUtc))
            {
                string badgeClass = userTrack.Rating switch
                {
                    TrackRating.LIKE => "bg-success",
                    TrackRating.SUPER_LIKE => "bg-primary",
                    TrackRating.DISLIKE => "bg-danger",
                    _ => "bg-secondary"
                };

                ListItemViewModel viewModel = new ListItemViewModel
                {
                    CardUrl = userTrack.Track.SpotifyUri,
                    PictureUrl = userTrack.Track.SpotifyAlbumCoverUrl,
                    Title = userTrack.Track.Title,
                    Subtitle = userTrack.Track.Artist,
                    CalendarText = userTrack.RatedAtUtc.Value.ToLocalTime().ToString("dd-MM-yyyy HH:mm"),
                    Badge = userTrack.Rating.ToString(),
                    BadgeClass = badgeClass
                };

                <partial name="_ListItem" model="viewModel" />
            }
        </div>
    </div>
</div>